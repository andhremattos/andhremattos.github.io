



<!doctype html>
<html lang="pt" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Learn deep learning and deep reinforcement learning theories and code easily and quickly. Used by thousands of students and professionals from top tech companies and research institutions.">
      
      
        <link rel="canonical" href="https://www.2dados.com/database/setting_up_cluster/">
      
      
        <meta name="author" content="Ritchie Ng">
      
      
        <meta name="lang:clipboard.copy" content="Copiar para área de transferência">
      
        <meta name="lang:clipboard.copied" content="Copiado para área de transferência">
      
        <meta name="lang:search.language" content="pt">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="Nenhum resultado encontrado">
      
        <meta name="lang:search.result.one" content="1 resultado encontrado">
      
        <meta name="lang:search.result.other" content="# resultados encontrados">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../docs/assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.3">
    
    
      
        <title>Cassandra Cluster Setup - 2dados</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#009688">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-122083328-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="teal" data-md-color-accent="teal">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#setting-up-cassandra-multi-node-cluster" tabindex="1" class="md-skip">
        Ir para o conteúdo
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://www.2dados.com/" title="2dados" class="md-header-nav__button md-logo">
          
            <i class="md-icon">whatshot</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              2dados
            </span>
            <span class="md-header-nav__topic">
              
                Cassandra Cluster Setup
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Buscar" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Digite para iniciar a busca
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
      
        
      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../deep_learning/intro/" class="md-tabs__link">
          Deep Learning Tutorials (CPU/GPU)
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../programming/intro/" class="md-tabs__link">
          Programming Tutorials
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../intro/" class="md-tabs__link md-tabs__link--active">
          Scalable Database Tutorials
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../news/news/" class="md-tabs__link">
          News
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://www.2dados.com/" title="2dados" class="md-nav__button md-logo">
      
        <i class="md-icon">whatshot</i>
      
    </a>
    2dados
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../sobre/" title="Sobre" class="md-nav__link">
      Sobre
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../pipeline/" title="Projetos" class="md-nav__link">
      Projetos
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../consultoria/" title="Consultoria" class="md-nav__link">
      Consultoria
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Deep Learning Tutorials (CPU/GPU)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Deep Learning Tutorials (CPU/GPU)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/course_progression/" title="Course Progression" class="md-nav__link">
      Course Progression
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/practical_pytorch/pytorch_matrices/" title="Matrices" class="md-nav__link">
      Matrices
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/practical_pytorch/pytorch_gradients/" title="Gradients" class="md-nav__link">
      Gradients
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/practical_pytorch/pytorch_linear_regression/" title="Linear Regression" class="md-nav__link">
      Linear Regression
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/practical_pytorch/pytorch_logistic_regression/" title="Logistic Regression" class="md-nav__link">
      Logistic Regression
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/practical_pytorch/pytorch_feedforward_neuralnetwork/" title="Feedforward Neural Networks (FNN)" class="md-nav__link">
      Feedforward Neural Networks (FNN)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/practical_pytorch/pytorch_convolutional_neuralnetwork/" title="Convolutional Neural Networks (CNN)" class="md-nav__link">
      Convolutional Neural Networks (CNN)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/practical_pytorch/pytorch_recurrent_neuralnetwork/" title="Recurrent Neural Networks (RNN)" class="md-nav__link">
      Recurrent Neural Networks (RNN)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/practical_pytorch/pytorch_lstm_neuralnetwork/" title="Long Short Term Memory Neural Networks (LSTM)" class="md-nav__link">
      Long Short Term Memory Neural Networks (LSTM)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/practical_pytorch/pytorch_autoencoder/" title="Autoencoders (AE)" class="md-nav__link">
      Autoencoders (AE)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/boosting_models_pytorch/derivative_gradient_jacobian/" title="Derivative, Gradient and Jacobian" class="md-nav__link">
      Derivative, Gradient and Jacobian
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/boosting_models_pytorch/forwardpropagation_backpropagation_gradientdescent/" title="Forward- and Backward-propagation and Gradient Descent" class="md-nav__link">
      Forward- and Backward-propagation and Gradient Descent
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/boosting_models_pytorch/lr_scheduling/" title="Learning Rate Scheduling" class="md-nav__link">
      Learning Rate Scheduling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/boosting_models_pytorch/optimizers/" title="Optimization Algorithms" class="md-nav__link">
      Optimization Algorithms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/boosting_models_pytorch/weight_initialization_activation_functions/" title="Weight Initialization and Activation Functions" class="md-nav__link">
      Weight Initialization and Activation Functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/deep_reinforcement_learning_pytorch/supervised_to_rl/" title="Supervised Learning to Reinforcement Learning (RL)" class="md-nav__link">
      Supervised Learning to Reinforcement Learning (RL)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/deep_reinforcement_learning_pytorch/bellman_mdp/" title="Markov Decision Processes (MDP) and Bellman Equations" class="md-nav__link">
      Markov Decision Processes (MDP) and Bellman Equations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/deep_reinforcement_learning_pytorch/dynamic_programming_frozenlake/" title="Dynamic Programming" class="md-nav__link">
      Dynamic Programming
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep_learning/readings/" title="Additional Readings" class="md-nav__link">
      Additional Readings
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Programming Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Programming Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../programming/intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../programming/cpp/cpp/" title="C++" class="md-nav__link">
      C++
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../programming/bash/bash/" title="Bash" class="md-nav__link">
      Bash
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../programming/python/python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../programming/javascript/javascript/" title="Javascript" class="md-nav__link">
      Javascript
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../programming/electron/electron/" title="Electron" class="md-nav__link">
      Electron
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      Scalable Database Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Scalable Database Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Cassandra Cluster Setup
      </label>
    
    <a href="./" title="Cassandra Cluster Setup" class="md-nav__link md-nav__link--active">
      Cassandra Cluster Setup
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Índice</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install-apache-cassandra" class="md-nav__link">
    Install Apache Cassandra
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-datastax-python-cassandra-driver" class="md-nav__link">
    Install DataStax Python Cassandra Driver
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#single-node-cassandra-cluster" class="md-nav__link">
    Single Node Cassandra Cluster
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multi-node-cassandra-cluster" class="md-nav__link">
    Multi-node Cassandra Cluster
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#steps-per-node" class="md-nav__link">
    Steps Per Node
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-modify-cassandra-configuration-settings" class="md-nav__link">
    Step 1: Modify Cassandra Configuration Settings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-modify-rack-details" class="md-nav__link">
    Step 2: Modify Rack Details
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-check-status" class="md-nav__link">
    Step 3: Check Status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-configure-firewall-ip-settings" class="md-nav__link">
    Step 4: Configure Firewall IP Settings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repeat-steps-1-to-4" class="md-nav__link">
    Repeat Steps 1 to 4
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#server-2-example-for-step-2" class="md-nav__link">
    Server 2 Example for Step 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-3-example-for-step-2" class="md-nav__link">
    Server 3 Example for Step 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-2-example-for-step-4" class="md-nav__link">
    Server 2 Example for Step 4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-3-example-for-step-4" class="md-nav__link">
    Server 3 Example for Step 4
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dead-node-fix" class="md-nav__link">
    Dead Node Fix
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    Summary
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#citation" class="md-nav__link">
    Citation
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" class="md-nav__link md-nav__link--active">
            Comentários
          </a>
        </li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      News
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        News
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../news/news/" title="Welcome" class="md-nav__link">
      Welcome
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../news/defence_and_science_technology_agency_dsta_nvidia_talk_2016_06/" title="Deep Learning Introduction, Defence and Science Technology Agency (DSTA) and NVIDIA, June 2019" class="md-nav__link">
      Deep Learning Introduction, Defence and Science Technology Agency (DSTA) and NVIDIA, June 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../news/detect_waterbone_debris_ai_for_social_good_icml_2019_06/" title="Oral Presentation for AI for Social Good Workshop ICML, June 2019" class="md-nav__link">
      Oral Presentation for AI for Social Good Workshop ICML, June 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../news/it_youth_leader_2019_03_11/" title="IT Youth Leader of The Year 2019, March 2019" class="md-nav__link">
      IT Youth Leader of The Year 2019, March 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../news/ammi_facebook_google_recap_2018_11_21/" title="AMMI (AIMS) supported by Facebook and Google, November 2018" class="md-nav__link">
      AMMI (AIMS) supported by Facebook and Google, November 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../news/nanjing_next_nus_tsinghua_ai_finance_healthcare_2018_11_01/" title="NExT++ AI in Healthcare and Finance, Nanjing, November 2018" class="md-nav__link">
      NExT++ AI in Healthcare and Finance, Nanjing, November 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../news/facebook_pytorch_devcon_recap_2018_10_02/" title="Recap of Facebook PyTorch Developer Conference, San Francisco, September 2018" class="md-nav__link">
      Recap of Facebook PyTorch Developer Conference, San Francisco, September 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../news/facebook_pytorch_developer_conference_2018_09_05/" title="Facebook PyTorch Developer Conference, San Francisco, September 2018" class="md-nav__link">
      Facebook PyTorch Developer Conference, San Francisco, September 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../news/nvidia_nus_mit_datathon_2018_07_05/" title="NUS-MIT-NUHS NVIDIA Image Recognition Workshop, Singapore, July 2018" class="md-nav__link">
      NUS-MIT-NUHS NVIDIA Image Recognition Workshop, Singapore, July 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../news/deep_learning_wizard_1y_2018_06_01/" title="Featured on PyTorch Website 2018" class="md-nav__link">
      Featured on PyTorch Website 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../news/nvidia_self_driving_cars_talk_2017_06_21/" title="NVIDIA Self Driving Cars & Healthcare Talk, Singapore, June 2017" class="md-nav__link">
      NVIDIA Self Driving Cars & Healthcare Talk, Singapore, June 2017
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../news/deep_learning_wizard_nvidia_inception_2018_05_01/" title="NVIDIA Inception Partner Status, Singapore, May 2017" class="md-nav__link">
      NVIDIA Inception Partner Status, Singapore, May 2017
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Índice</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install-apache-cassandra" class="md-nav__link">
    Install Apache Cassandra
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-datastax-python-cassandra-driver" class="md-nav__link">
    Install DataStax Python Cassandra Driver
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#single-node-cassandra-cluster" class="md-nav__link">
    Single Node Cassandra Cluster
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multi-node-cassandra-cluster" class="md-nav__link">
    Multi-node Cassandra Cluster
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#steps-per-node" class="md-nav__link">
    Steps Per Node
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-modify-cassandra-configuration-settings" class="md-nav__link">
    Step 1: Modify Cassandra Configuration Settings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-modify-rack-details" class="md-nav__link">
    Step 2: Modify Rack Details
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-check-status" class="md-nav__link">
    Step 3: Check Status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-configure-firewall-ip-settings" class="md-nav__link">
    Step 4: Configure Firewall IP Settings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repeat-steps-1-to-4" class="md-nav__link">
    Repeat Steps 1 to 4
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#server-2-example-for-step-2" class="md-nav__link">
    Server 2 Example for Step 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-3-example-for-step-2" class="md-nav__link">
    Server 3 Example for Step 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-2-example-for-step-4" class="md-nav__link">
    Server 2 Example for Step 4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-3-example-for-step-4" class="md-nav__link">
    Server 3 Example for Step 4
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dead-node-fix" class="md-nav__link">
    Dead Node Fix
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    Summary
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#citation" class="md-nav__link">
    Citation
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" class="md-nav__link md-nav__link--active">
            Comentários
          </a>
        </li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="setting-up-cassandra-multi-node-cluster">Setting up Cassandra Multi-node Cluster<a class="headerlink" href="#setting-up-cassandra-multi-node-cluster" title="Permanent link">&para;</a></h1>
<h2 id="install-apache-cassandra">Install Apache Cassandra<a class="headerlink" href="#install-apache-cassandra" title="Permanent link">&para;</a></h2>
<div class="admonition warning">
<p class="admonition-title">Patience is key initially</p>
<p>It will be quite tedious to many people in setting up a multi-node Cassandra cluster. You are likely to face a lot of problems. But with a strong community and this tried-and-proven guide, you should be ok! Just be patient.</p>
<p>Remember when you're asking for help on StackOverflow, here or anywhere else, do paste the logs to make everyone's life easier to help you debug quickly. </p>
<p>All you need to do is to run this base command and paste the logs.</p>
<div class="codehilite"><pre><span></span><span class="n">cat</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">cassandra</span><span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">log</span>
</pre></div>

</div>
<p>Here, we will install all of the required Debian packages. To ensure you've the latest version of Cassandra, please use the official link at <a href="http://cassandra.apache.org/">cassandra.apache.org/download</a>.</p>
<p>Bash Commands
<div class="codehilite"><pre><span></span><span class="n">echo</span> <span class="ss">&quot;deb http://www.apache.org/dist/cassandra/debian 311x main&quot;</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="o">-</span><span class="n">a</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">sources</span><span class="p">.</span><span class="n">list</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">cassandra</span><span class="p">.</span><span class="n">sources</span><span class="p">.</span><span class="n">list</span>

<span class="n">curl</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">org</span><span class="o">/</span><span class="n">dist</span><span class="o">/</span><span class="n">cassandra</span><span class="o">/</span><span class="n">KEYS</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="k">key</span> <span class="k">add</span> <span class="o">-</span>

<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="k">get</span> <span class="k">update</span>

<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="k">get</span> <span class="n">install</span> <span class="n">cassandra</span>
</pre></div></p>
<p>This would get you up and running with Cassandra v3.11.</p>
<h2 id="install-datastax-python-cassandra-driver">Install DataStax Python Cassandra Driver<a class="headerlink" href="#install-datastax-python-cassandra-driver" title="Permanent link">&para;</a></h2>
<p>We need to install the Python Cassandra Driver so we can easily interact with our Cassandra Database without using the CQLSH (this is Cassandra's shell to run CQL commands to perform CRUD operations) commandline directly.</p>
<div class="admonition question">
<p class="admonition-title">What is CRUD?</p>
<p>CRUD is the acronym of CREATE, READ, UPDATE, and DELETE. For databases, we typically have these 4 categories of operations so we can create new data points, update, read or delete them in our database.</p>
</div>
<p>Bash Commands
<div class="codehilite"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">cassandra</span><span class="o">-</span><span class="n">driver</span>
</pre></div></p>
<p>This is strictly for installation on Linux platforms, refer to the <a href="https://datastax.github.io/python-driver/installation.html">official website</a> for more details.</p>
<h2 id="single-node-cassandra-cluster">Single Node Cassandra Cluster<a class="headerlink" href="#single-node-cassandra-cluster" title="Permanent link">&para;</a></h2>
<p>Before we venture into the cool world of multi-node cluster requiring many servers, we will start with a single node cluster that only requires a single server (desktop/laptop).</p>
<p>Once you've installed everything so far, you should run the following.</p>
<p>Bash commands</p>
<div class="codehilite"><pre><span></span><span class="n">sudo</span> <span class="n">service</span> <span class="n">cassandra</span> <span class="k">start</span>
<span class="n">sudo</span> <span class="n">nodetool</span> <span class="n">status</span>
</pre></div>

<p>And this will print out something like that:</p>
<div class="codehilite"><pre><span></span><span class="n">Datacenter</span><span class="o">:</span> <span class="n">datacenter1</span>
<span class="o">=============================</span>
<span class="n">Status</span><span class="o">=</span><span class="n">Up</span><span class="o">/</span><span class="n">Down</span>
<span class="o">|/</span> <span class="n">State</span><span class="o">=</span><span class="n">Normal</span><span class="sr">/Leaving/Joining/</span><span class="n">Moving</span>
<span class="o">--</span>  <span class="n">Address</span>       <span class="n">Load</span>       <span class="n">Tokens</span>       <span class="n">Owns</span> <span class="o">(</span><span class="n">effective</span><span class="o">)</span>  <span class="n">Host</span> <span class="n">ID</span>                               <span class="n">Rack</span>
<span class="n">UN</span>  <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>     <span class="mf">318.78</span> <span class="n">KiB</span>  <span class="mi">256</span>          <span class="mf">100.0</span><span class="o">%</span>            <span class="n">g5ac4c9</span><span class="o">-</span><span class="mi">99</span><span class="n">b7</span><span class="o">-</span><span class="mi">65</span><span class="n">d</span><span class="o">-</span><span class="mi">24</span><span class="n">cfd82524f9</span>      <span class="n">rack1</span>
</pre></div>

<p>That's it, we've built our single node Cassandra database.</p>
<h2 id="multi-node-cassandra-cluster">Multi-node Cassandra Cluster<a class="headerlink" href="#multi-node-cassandra-cluster" title="Permanent link">&para;</a></h2>
<p>Remember it's standard to have at least 3 nodes, and in a basic 3 separate server configuration (3 separate desktops for non-enterprise users). Because of this, we will base this tutorial on setting up a 3-node cluster. But the same steps apply if you want to even do 10000 nodes.</p>
<div class="admonition tip">
<p class="admonition-title">Installing Sublime critical</p>
<p>Sublime is a text editor, and it would help if you're not familiar with VIM which I use frequently. Honestly using Sublime to edit all the following files we will edit is much easier, trust me! </p>
<p>To install Sublime run the following bash commands in sequence:
<div class="codehilite"><pre><span></span><span class="n">wget</span> <span class="o">-</span><span class="n">qO</span> <span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">download</span><span class="p">.</span><span class="n">sublimetext</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">sublimehq</span><span class="o">-</span><span class="n">pub</span><span class="p">.</span><span class="n">gpg</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="k">key</span> <span class="k">add</span> <span class="o">-</span>

<span class="n">echo</span> <span class="ss">&quot;deb https://download.sublimetext.com/ apt/stable/&quot;</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">sources</span><span class="p">.</span><span class="n">list</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">sublime</span><span class="o">-</span><span class="nb">text</span><span class="p">.</span><span class="n">list</span>

<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="k">get</span> <span class="k">update</span>

<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="k">get</span> <span class="n">install</span> <span class="n">sublime</span><span class="o">-</span><span class="nb">text</span>
</pre></div></p>
<p>Now check if it works by running this command in your bash:
<div class="codehilite"><pre><span></span><span class="n">subl</span>
</pre></div></p>
<p>This should open Sublime text editor! You're now ready.</p>
</div>
<p>Before we move on to the steps to set up each node, we need the IP address of all 3 servers. This is simple, just run the following bash command:</p>
<div class="codehilite"><pre><span></span><span class="n">ifconfig</span> <span class="o">|</span> <span class="n">sed</span> <span class="o">-</span><span class="n">En</span> <span class="s1">&#39;s/127.0.0.1//;s/.*inet (addr:)?(([0-9]*\.){3}[0-9]*).*/\2/p&#39;</span>
</pre></div>

<p>This would return the server's IP address that we need for example:</p>
<div class="codehilite"><pre><span></span><span class="n">server_1_ip</span><span class="o">:</span> <span class="mf">112.522</span><span class="o">.</span><span class="mf">6.61</span>
<span class="n">server_2_ip</span><span class="o">:</span> <span class="mf">112.522</span><span class="o">.</span><span class="mf">6.62</span>
<span class="n">server_3_ip</span><span class="o">:</span> <span class="mf">112.522</span><span class="o">.</span><span class="mf">6.63</span>
</pre></div>

<p>We will be using these IPs as a base for configuration in the subsequent sections. Take note yours would differ and you need to change accordingly.</p>
<h3 id="steps-per-node">Steps Per Node<a class="headerlink" href="#steps-per-node" title="Permanent link">&para;</a></h3>
<div class="admonition warning">
<p class="admonition-title">Critical Section You Need To Repeat</p>
<p>This is a critcal section. On <strong>EVERY</strong> server, you need to repeat all the steps shown in this section. In our case of a 3 node cluster, using 3 servers, we need to repeat this 3 times.</p>
</div>
<h4 id="step-1-modify-cassandra-configuration-settings">Step 1: Modify Cassandra Configuration Settings<a class="headerlink" href="#step-1-modify-cassandra-configuration-settings" title="Permanent link">&para;</a></h4>
<p>Run the following bash to edit the configuration file for server 1 (112.522.6.61):</p>
<div class="codehilite"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cassandra</span>
<span class="n">subl</span> <span class="n">cassandra</span><span class="p">.</span><span class="n">yaml</span>
</pre></div>

<p>Now you need to find the following fields and change them accordingly.</p>
<div class="codehilite"><pre><span></span><span class="n">cluster_name</span><span class="p">:</span> <span class="s1">&#39;CassandraDBCluster&#39;</span>


<span class="n">seed_provider</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">class_name</span><span class="p">:</span> <span class="n">org</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">cassandra</span><span class="p">.</span><span class="k">locator</span><span class="p">.</span><span class="n">SimpleSeedProvider</span>
    <span class="k">parameters</span><span class="p">:</span>
         <span class="o">-</span> <span class="n">seeds</span><span class="p">:</span> <span class="ss">&quot;112.522.6.61, 112.522.6.62, 112.522.6.63&quot;</span>


<span class="n">listen_address</span><span class="p">:</span> <span class="mi">112</span><span class="p">.</span><span class="mi">522</span><span class="p">.</span><span class="mi">6</span><span class="p">.</span><span class="mi">61</span>


<span class="n">rpc_address</span><span class="p">:</span> <span class="mi">112</span><span class="p">.</span><span class="mi">522</span><span class="p">.</span><span class="mi">6</span><span class="p">.</span><span class="mi">61</span>


<span class="n">endpoint_snitch</span><span class="p">:</span> <span class="n">GossipingPropertyFileSnitch</span>

<span class="n">auto_bootstrap</span><span class="p">:</span> <span class="k">true</span>
</pre></div>

<h4 id="step-2-modify-rack-details">Step 2: Modify Rack Details<a class="headerlink" href="#step-2-modify-rack-details" title="Permanent link">&para;</a></h4>
<p>Run the following bash command to edit the rack details:</p>
<div class="codehilite"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cassandra</span>
<span class="n">subl</span> <span class="n">cassandra</span><span class="o">-</span><span class="n">rackdc</span><span class="p">.</span><span class="n">properties</span>
</pre></div>

<p>And change the following fields to this:
<div class="codehilite"><pre><span></span><span class="n">dc</span><span class="o">=</span><span class="n">datacenter1</span>
</pre></div></p>
<h4 id="step-3-check-status">Step 3: Check Status<a class="headerlink" href="#step-3-check-status" title="Permanent link">&para;</a></h4>
<p>Restart service with the following bash commands:</p>
<div class="codehilite"><pre><span></span><span class="n">sudo</span> <span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cassandra</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="k">system</span><span class="cm">/*</span>
<span class="cm">sudo service cassandra restart</span>
<span class="cm">sudo nodetool status</span>
</pre></div>

<p>Here you would see an output like this:</p>
<div class="codehilite"><pre><span></span><span class="n">Datacenter</span><span class="o">:</span> <span class="n">datacenter</span>
<span class="o">=============================</span>
<span class="n">Status</span><span class="o">=</span><span class="n">Up</span><span class="o">/</span><span class="n">Down</span>
<span class="o">|/</span> <span class="n">State</span><span class="o">=</span><span class="n">Normal</span><span class="sr">/Leaving/Joining/</span><span class="n">Moving</span>
<span class="o">--</span>  <span class="n">Address</span>       <span class="n">Load</span>       <span class="n">Tokens</span>       <span class="n">Owns</span> <span class="o">(</span><span class="n">effective</span><span class="o">)</span>  <span class="n">Host</span> <span class="n">ID</span>                               <span class="n">Rack</span>
<span class="n">UN</span>  <span class="mf">112.522</span><span class="o">.</span><span class="mf">6.61</span>  <span class="mf">318.78</span> <span class="n">KiB</span>  <span class="mi">256</span>          <span class="mf">100.0</span><span class="o">%</span>            <span class="n">f5c84c9</span><span class="o">-</span><span class="mi">99</span><span class="n">b7</span><span class="o">-</span><span class="mi">45</span><span class="n">d</span><span class="o">-</span><span class="mi">8856</span><span class="o">-</span><span class="mi">24</span><span class="n">cfd82523f9</span>  <span class="n">rack1</span>
<span class="n">UN</span>  <span class="mf">112.522</span><span class="o">.</span><span class="mf">6.62</span>  <span class="mf">206.42</span> <span class="n">KiB</span>  <span class="mi">256</span>          <span class="mf">100.0</span><span class="o">%</span>            <span class="n">ac2f24da</span><span class="o">-</span><span class="mi">1</span><span class="n">b2c</span><span class="o">-</span><span class="mi">4</span><span class="n">e3</span><span class="o">-</span><span class="mi">8</span><span class="n">a75</span><span class="o">-</span><span class="mi">0</span><span class="n">e28ec366a4</span>  <span class="n">rack1</span>
<span class="n">UN</span>  <span class="mf">112.522</span><span class="o">.</span><span class="mf">6.63</span>  <span class="mf">338.34</span> <span class="n">KiB</span>  <span class="mi">256</span>          <span class="mf">100.0</span><span class="o">%</span>            <span class="mi">55</span><span class="n">a227d</span><span class="o">-</span><span class="n">ffbe</span><span class="o">-</span><span class="mi">45</span><span class="n">d5</span><span class="o">-</span><span class="mi">8698</span><span class="o">-</span><span class="mi">60</span><span class="n">c374b3a6b</span>  <span class="n">rack1</span>
</pre></div>

<h4 id="step-4-configure-firewall-ip-settings">Step 4: Configure Firewall IP Settings<a class="headerlink" href="#step-4-configure-firewall-ip-settings" title="Permanent link">&para;</a></h4>
<p>Run the following bash commands</p>
<div class="codehilite"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="k">get</span> <span class="n">install</span> <span class="n">iptables</span><span class="o">-</span><span class="n">persistent</span>

<span class="n">sudo</span> <span class="n">iptables</span> <span class="o">-</span><span class="n">A</span> <span class="k">INPUT</span> <span class="o">-</span><span class="n">p</span> <span class="n">tcp</span> <span class="o">-</span><span class="n">s</span> <span class="mi">112</span><span class="p">.</span><span class="mi">522</span><span class="p">.</span><span class="mi">6</span><span class="p">.</span><span class="mi">62</span> <span class="o">-</span><span class="n">m</span> <span class="n">multiport</span> <span class="c1">--dports 7000,9042 -m state --state NEW,ESTABLISHED -j ACCEPT</span>
<span class="n">sudo</span> <span class="n">iptables</span> <span class="o">-</span><span class="n">A</span> <span class="k">INPUT</span> <span class="o">-</span><span class="n">p</span> <span class="n">tcp</span> <span class="o">-</span><span class="n">s</span> <span class="mi">112</span><span class="p">.</span><span class="mi">522</span><span class="p">.</span><span class="mi">6</span><span class="p">.</span><span class="mi">63</span> <span class="o">-</span><span class="n">m</span> <span class="n">multiport</span> <span class="c1">--dports 7000,9042 -m state --state NEW,ESTABLISHED -j ACCEPT</span>

<span class="n">sudo</span> <span class="n">bash</span> <span class="o">-</span><span class="k">c</span> <span class="ss">&quot;iptables-save &gt; /etc/iptables/rules.v4&quot;</span>

<span class="n">sudo</span> <span class="n">netfilter</span><span class="o">-</span><span class="n">persistent</span> <span class="n">reload</span>

<span class="n">sudo</span> <span class="n">nodetool</span> <span class="n">status</span>
</pre></div>

<h3 id="repeat-steps-1-to-4">Repeat Steps 1 to 4<a class="headerlink" href="#repeat-steps-1-to-4" title="Permanent link">&para;</a></h3>
<p>You have to repeat all 4 steps for the other 2 servers but <strong>step 1</strong> and <strong>step 4</strong> requires slightly different settings. For the other servers, you need to basically change the IP to the server's IP. And for the IP firewall settings, you need to allow entry from the other 2 servers instead of itself.</p>
<h4 id="server-2-example-for-step-2">Server 2 Example for Step 2<a class="headerlink" href="#server-2-example-for-step-2" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="n">cluster_name</span><span class="p">:</span> <span class="s1">&#39;CassandraDBCluster&#39;</span>


<span class="n">seed_provider</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">class_name</span><span class="p">:</span> <span class="n">org</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">cassandra</span><span class="p">.</span><span class="k">locator</span><span class="p">.</span><span class="n">SimpleSeedProvider</span>
    <span class="k">parameters</span><span class="p">:</span>
         <span class="o">-</span> <span class="n">seeds</span><span class="p">:</span> <span class="ss">&quot;112.522.6.61, 112.522.6.62, 112.522.6.63&quot;</span>


<span class="o">#</span> <span class="k">ONLY</span> <span class="n">THIS</span> <span class="n">LINE</span> <span class="n">CHANGES</span>
<span class="n">listen_address</span><span class="p">:</span> <span class="mi">112</span><span class="p">.</span><span class="mi">522</span><span class="p">.</span><span class="mi">6</span><span class="p">.</span><span class="mi">62</span>

<span class="o">#</span> <span class="k">ONLY</span> <span class="n">THIS</span> <span class="n">LINE</span> <span class="n">CHANGES</span>
<span class="n">rpc_address</span><span class="p">:</span> <span class="mi">112</span><span class="p">.</span><span class="mi">522</span><span class="p">.</span><span class="mi">6</span><span class="p">.</span><span class="mi">62</span>


<span class="n">endpoint_snitch</span><span class="p">:</span> <span class="n">GossipingPropertyFileSnitch</span>

<span class="n">auto_bootstrap</span><span class="p">:</span> <span class="k">true</span>
</pre></div>

<h4 id="server-3-example-for-step-2">Server 3 Example for Step 2<a class="headerlink" href="#server-3-example-for-step-2" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="n">cluster_name</span><span class="p">:</span> <span class="s1">&#39;CassandraDBCluster&#39;</span>


<span class="n">seed_provider</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">class_name</span><span class="p">:</span> <span class="n">org</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">cassandra</span><span class="p">.</span><span class="k">locator</span><span class="p">.</span><span class="n">SimpleSeedProvider</span>
    <span class="k">parameters</span><span class="p">:</span>
         <span class="o">-</span> <span class="n">seeds</span><span class="p">:</span> <span class="ss">&quot;112.522.6.61, 112.522.6.62, 112.522.6.63&quot;</span>


<span class="o">#</span> <span class="k">ONLY</span> <span class="n">THIS</span> <span class="n">LINE</span> <span class="n">CHANGES</span>
<span class="n">listen_address</span><span class="p">:</span> <span class="mi">112</span><span class="p">.</span><span class="mi">522</span><span class="p">.</span><span class="mi">6</span><span class="p">.</span><span class="mi">63</span>

<span class="o">#</span> <span class="k">ONLY</span> <span class="n">THIS</span> <span class="n">LINE</span> <span class="n">CHANGES</span>
<span class="n">rpc_address</span><span class="p">:</span> <span class="mi">112</span><span class="p">.</span><span class="mi">522</span><span class="p">.</span><span class="mi">6</span><span class="p">.</span><span class="mi">63</span>


<span class="n">endpoint_snitch</span><span class="p">:</span> <span class="n">GossipingPropertyFileSnitch</span>

<span class="n">auto_bootstrap</span><span class="p">:</span> <span class="k">true</span>
</pre></div>

<h4 id="server-2-example-for-step-4">Server 2 Example for Step 4<a class="headerlink" href="#server-2-example-for-step-4" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="k">get</span> <span class="n">install</span> <span class="n">iptables</span><span class="o">-</span><span class="n">persistent</span>

<span class="o">#</span> <span class="k">ONLY</span> <span class="n">THESE</span> <span class="n">LINES</span> <span class="n">CHANGE</span> <span class="k">TO</span> <span class="n">ALLOW</span> <span class="n">COMMUNICATION</span> <span class="k">WITH</span> <span class="n">SERVER</span> <span class="mi">1</span> <span class="k">AND</span> <span class="mi">3</span>
<span class="n">sudo</span> <span class="n">iptables</span> <span class="o">-</span><span class="n">A</span> <span class="k">INPUT</span> <span class="o">-</span><span class="n">p</span> <span class="n">tcp</span> <span class="o">-</span><span class="n">s</span> <span class="mi">112</span><span class="p">.</span><span class="mi">522</span><span class="p">.</span><span class="mi">6</span><span class="p">.</span><span class="mi">61</span> <span class="o">-</span><span class="n">m</span> <span class="n">multiport</span> <span class="c1">--dports 7000,9042 -m state --state NEW,ESTABLISHED -j ACCEPT</span>
<span class="n">sudo</span> <span class="n">iptables</span> <span class="o">-</span><span class="n">A</span> <span class="k">INPUT</span> <span class="o">-</span><span class="n">p</span> <span class="n">tcp</span> <span class="o">-</span><span class="n">s</span> <span class="mi">112</span><span class="p">.</span><span class="mi">522</span><span class="p">.</span><span class="mi">6</span><span class="p">.</span><span class="mi">63</span> <span class="o">-</span><span class="n">m</span> <span class="n">multiport</span> <span class="c1">--dports 7000,9042 -m state --state NEW,ESTABLISHED -j ACCEPT</span>

<span class="n">sudo</span> <span class="n">bash</span> <span class="o">-</span><span class="k">c</span> <span class="ss">&quot;iptables-save &gt; /etc/iptables/rules.v4&quot;</span>

<span class="n">sudo</span> <span class="n">netfilter</span><span class="o">-</span><span class="n">persistent</span> <span class="n">reload</span>

<span class="n">sudo</span> <span class="n">nodetool</span> <span class="n">status</span>
</pre></div>

<h4 id="server-3-example-for-step-4">Server 3 Example for Step 4<a class="headerlink" href="#server-3-example-for-step-4" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="k">get</span> <span class="n">install</span> <span class="n">iptables</span><span class="o">-</span><span class="n">persistent</span>

<span class="o">#</span> <span class="k">ONLY</span> <span class="n">THESE</span> <span class="n">LINES</span> <span class="n">CHANGE</span> <span class="k">TO</span> <span class="n">ALLOW</span> <span class="n">COMMUNICATION</span> <span class="k">WITH</span> <span class="n">SERVER</span> <span class="mi">1</span> <span class="k">AND</span> <span class="mi">2</span>
<span class="n">sudo</span> <span class="n">iptables</span> <span class="o">-</span><span class="n">A</span> <span class="k">INPUT</span> <span class="o">-</span><span class="n">p</span> <span class="n">tcp</span> <span class="o">-</span><span class="n">s</span> <span class="mi">112</span><span class="p">.</span><span class="mi">522</span><span class="p">.</span><span class="mi">6</span><span class="p">.</span><span class="mi">61</span> <span class="o">-</span><span class="n">m</span> <span class="n">multiport</span> <span class="c1">--dports 7000,9042 -m state --state NEW,ESTABLISHED -j ACCEPT</span>
<span class="n">sudo</span> <span class="n">iptables</span> <span class="o">-</span><span class="n">A</span> <span class="k">INPUT</span> <span class="o">-</span><span class="n">p</span> <span class="n">tcp</span> <span class="o">-</span><span class="n">s</span> <span class="mi">112</span><span class="p">.</span><span class="mi">522</span><span class="p">.</span><span class="mi">6</span><span class="p">.</span><span class="mi">62</span> <span class="o">-</span><span class="n">m</span> <span class="n">multiport</span> <span class="c1">--dports 7000,9042 -m state --state NEW,ESTABLISHED -j ACCEPT</span>

<span class="n">sudo</span> <span class="n">bash</span> <span class="o">-</span><span class="k">c</span> <span class="ss">&quot;iptables-save &gt; /etc/iptables/rules.v4&quot;</span>

<span class="n">sudo</span> <span class="n">netfilter</span><span class="o">-</span><span class="n">persistent</span> <span class="n">reload</span>

<span class="n">sudo</span> <span class="n">nodetool</span> <span class="n">status</span>
</pre></div>

<h2 id="dead-node-fix">Dead Node Fix<a class="headerlink" href="#dead-node-fix" title="Permanent link">&para;</a></h2>
<p>When your server/desktop restarts, you may face a dead node. You need replace the address with the same IP for it to work.</p>
<div class="codehilite"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cassandra</span>
<span class="n">subtl</span> <span class="n">cassandra</span><span class="o">-</span><span class="n">env</span><span class="p">.</span><span class="n">sh</span>
</pre></div>

<p>Add the following line in the last row assuming server 1 is dead where the IP is 112.522.6.61
<div class="codehilite"><pre><span></span><span class="n">JVM_OPTS</span><span class="o">=</span><span class="ss">&quot;$JVM_OPTS -Dcassandra.replace_address=112.522.6.61&quot;</span>
</pre></div></p>
<p>Then run the following bash commands</p>
<div class="codehilite"><pre><span></span><span class="n">sudo</span> <span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cassandra</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="k">system</span><span class="cm">/*</span>
<span class="cm">sudo service cassandra restart</span>
<span class="cm">sudo nodetool status</span>
</pre></div>

<p>You might have to wait awhile and re-run <code class="codehilite"><span class="n">sudo</span> <span class="n">nodetool</span> <span class="n">status</span></code> for the DB to get up and running.</p>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h2>
<p>We have successfully set up a 3-node Cassandra cluster DB after all these steps. We will move on to interacting with the cluster with CQLSH and the Python Driver in subsequent guides.</p>
<h2 id="citation">Citation<a class="headerlink" href="#citation" title="Permanent link">&para;</a></h2>
<p>If you have found these useful in your research, presentations, school work, projects or workshops, feel free to cite using this DOI.</p>
<p><a href="https://zenodo.org/badge/latestdoi/139945544"><img alt="DOI" src="https://zenodo.org/badge/139945544.svg" /></a> </p>
                
                  
                
              
              
                


  <h2 id="__comments">Comentários</h2>
  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = "https://www.2dados.com/database/setting_up_cluster/";
      this.page.identifier =
        "database/setting_up_cluster/";
    };
    (function() {
      var d = document, s = d.createElement("script");
      s.src = "//deep-learning-wizard.disqus.com/embed.js";
      s.setAttribute("data-timestamp", +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>

              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="database/intro/" title="Introduction" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Anterior
                </span>
                Introduction
              </span>
            </div>
          </a>
        
        
          <a href="news/news/" title="Welcome" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Próximo
                </span>
                Welcome
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; 2019 2dados. "Deus não joga dados" (Albert Einstein).
          </div>
        
         Todo o conteúdo deste site está publicado sob a licença 
        <a href="http://www.nvidia.com/page/home.html">Creative Commons CC BY-SA 4.0 Brasil</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/andhremattos" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://www.facebook.com/acmatos/" class="md-footer-social__link fa fa-facebook"></a>
    
      <a href="https://www.linkedin.com/company/andhremattos/" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.ac79c3b0.js"></script>
      
        
        
          
          <script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              
                <script src="../../assets/javascripts/lunr/lunr.pt.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>